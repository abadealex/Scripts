{% extends "base.html" %}
{% block title %}Review Submission - {{ test.title }}{% endblock %}

{% block content %}
<h1>🔍 Review Submission for Test: {{ test.title }}</h1>
<p>Date: {{ test.date.strftime('%Y-%m-%d') }}</p>

<!-- Teacher Materials -->
<h3>📘 Marking Guide</h3>
{% if file_guide_url %}
  <p><a href="{{ file_guide_url }}" target="_blank">View Marking Guide</a></p>
{% else %}
  <p><em>No marking guide uploaded.</em></p>
{% endif %}

<h3>📄 Rubric</h3>
{% if file_rubric_url %}
  <p><a href="{{ file_rubric_url }}" target="_blank">View Rubric</a></p>
{% else %}
  <p><em>No rubric uploaded.</em></p>
{% endif %}

<h3>🧾 Answered Script</h3>
{% if answered_script_url %}
  <p><a href="{{ answered_script_url }}" target="_blank">View Answered Script</a></p>
{% else %}
  <p><em>No answered script uploaded.</em></p>
{% endif %}

<h3>📄 Student Submission</h3>
{% if submission_url %}
  <p><a href="{{ submission_url }}" target="_blank">📄 View Submission File</a></p>
{% else %}
  <p><em>No submission file uploaded.</em></p>
{% endif %}

<hr>

<!-- Manual Review Form -->
<h3>✍️ Manual Review</h3>
<form method="POST" action="{{ url_for('teacher_bp.manual_review_submit', submission_id=submission.id) }}">
  {{ csrf_token() }}
  
  <div class="form-group">
    <label for="grade">Grade:</label>
    <input type="number" step="0.1" class="form-control" name="grade" id="grade"
           value="{{ submission.grade or '' }}" required>
  </div>

  <div class="form-group">
    <label for="comments">Feedback:</label>
    <textarea class="form-control" name="comments" id="comments" rows="5" required>{{ submission.feedback or '' }}</textarea>
  </div>

  <button type="submit" class="btn btn-primary">Submit Review</button>
</form>
{% endblock %}
